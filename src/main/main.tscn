[gd_scene load_steps=3 format=3 uid="uid://cddk6uximv045"]

[ext_resource type="Script" path="res://src/main/main.gd" id="1_jmej6"]

[sub_resource type="GDScript" id="GDScript_7mv57"]
script/source = "extends LineEdit

var _history: Array[String] = []
var _history_index: int = -1


func _input(event: InputEvent) -> void:
	if event.is_action_pressed(\"ui_up\"):
		if _history_index < _history.size() - 1:
			_history_index += 1
	elif event.is_action_pressed(\"ui_down\"):
		if _history_index > -1:
			_history_index -= 1
		
		if _history_index == -1:
			text = \"\"
			return
	
	if _history_index != -1:
		text = _history[_history_index]


func _on_line_edit_text_submitted(new_text: String) -> void:
	var command_text: String = new_text.strip_edges()
	
	if _history.has(new_text):
		_history.erase(new_text)
	_history.push_front(new_text)
	_history_index = -1
	text = \"\"
	
	var split_string: PackedStringArray = new_text.split(\" \")
	var command: String = split_string[0].to_lower()
	var args = split_string.remove_at(0)
	CommandManager.execute_command(command, args)
"

[node name="Main" type="Node"]
script = ExtResource( "1_jmej6" )

[node name="LineEdit" type="LineEdit" parent="."]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -274.5
offset_top = -15.5
offset_right = 274.5
offset_bottom = 15.5
script = SubResource( "GDScript_7mv57" )

[connection signal="text_submitted" from="LineEdit" to="LineEdit" method="_on_line_edit_text_submitted"]
